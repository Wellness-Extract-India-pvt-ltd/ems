{"timestamp":"2025-09-18 12:59:56.736","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 12:59:56.739","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 12:59:57.701","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 12:59:57.703","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.7250832,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 12:59:57.724","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 12:59:57.743","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 12:59:57.861","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 12:59:57.869","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 12:59:58.031","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":148,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 12:59:58.710","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:239:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 12:59:58.711","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 12:59:58.716","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 12:59:58.717","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 12:59:58.872","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 12:59:58.925","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:44:47.971","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 13:44:48.029","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 13:44:48.030","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"87ba61e0-2902-40f9-b4f6-38c94fedcfcc"}
{"timestamp":"2025-09-18 13:44:48.033","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 08:14:48 GMT] : [87ba61e0-2902-40f9-b4f6-38c94fedcfcc] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 13:44:48.040","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"87ba61e0-2902-40f9-b4f6-38c94fedcfcc","urlLength":622}
{"timestamp":"2025-09-18 13:44:48.041","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":622,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 13:44:48.052","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"81ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":44}
{"timestamp":"2025-09-18 13:45:15.292","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_J3RW-_OYNS8k9_rJt3gEPpiLAcKuiUEncvncS0eosLfcvpFhC2f1y7bFFt7BB0Hb1YrJIT7el5hkkOp0hvg_GIP_7gvukfsiZACfKjImYxFAIMZ5-U2NRYTVFMGpAMPqQOV6rbbM4BWCSquW-ejnNwL4euQcBWcBNz4-I3SP2EXREAYe3Ttj_d4tKKG-dognop_DG903GS88fmoJZtFfVLzV4r-OhiJHVtmknoTUu2qKAldupX_aLxxNcvcITfKH5mXX-kywb1xM7zQBXTCQop6H9hhH9RNtePWsxgeTtKkQygTZkX1rTn4MriCHpGGjcZVUy0fPtQRmqpv78qUVd5C6M3IsK5xmdlE-Dcx8fiEbHnmlNmqGUO_-95heSmC1ahiGLWQj-hLTHZBlUIS6jCn5sHvbXrY_Tmh75VPOjoqSVV4h5MaLTjawKeSkjykfmmTBUtKL8A_1OEOa8-dXZ3_MeTpVVM9CKMPlg88xfbFeojNCsYJ_WfXz9tovJ7RHKRx7lpD17kWjXV4d1x5hRCKtAkOX5EhVWFGqRQRzwUA2YXuMsDVfyvobF0exJwsmRZc7AtB9igHCB6UVKMlKfpC6MRT6topbzrcK-UOsBSnwSOpjOWLBydgmGEWSqY6WBEsb750kjbyfjiZ0TsG3p-eL3f-QCA91B-e_tv8r4PRh3XuAGDwKzIbgcMrUUxcD4LK48T4JWlS1eK-HYnztsxF6dm3kbmzcOkEoIXlems84XPaXkyWC2XEBJCoQ5fMVVIj84lWlKKCIXhFKTGEhF9--UKMgT0x3_4v5VspHL-Pdq1sDLGy10gDncnzJXvSf4_LnfksveafotE93oCfaFuQuZ4AY&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=rbuqnsh6wj63hb7rmgkfc&session_state=008c1b49-e3e3-6aef-4792-0495165e0792"}
{"timestamp":"2025-09-18 13:45:15.295","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 13:45:15.296","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 13:45:15.994","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":4339,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 13:45:18.146","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 13:45:18.148","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 13:45:18.183","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 13:45:18.186","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 13:45:18.191","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 13:45:18.198","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTgzMzE4LCJleHAiOjE3NTg3ODgxMTh9.zCP4XTztctoDbPUVfqiK9R4P_UkAOJBQ9SuljhVWkf0","updatedAt":"2025-09-18T08:15:18.193Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 13:45:18.203","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_J3RW-_OYNS8k9_rJt3gEPpiLAcKuiUEncvncS0eosLfcvpFhC2f1y7bFFt7BB0Hb1YrJIT7el5hkkOp0hvg_GIP_7gvukfsiZACfKjImYxFAIMZ5-U2NRYTVFMGpAMPqQOV6rbbM4BWCSquW-ejnNwL4euQcBWcBNz4-I3SP2EXREAYe3Ttj_d4tKKG-dognop_DG903GS88fmoJZtFfVLzV4r-OhiJHVtmknoTUu2qKAldupX_aLxxNcvcITfKH5mXX-kywb1xM7zQBXTCQop6H9hhH9RNtePWsxgeTtKkQygTZkX1rTn4MriCHpGGjcZVUy0fPtQRmqpv78qUVd5C6M3IsK5xmdlE-Dcx8fiEbHnmlNmqGUO_-95heSmC1ahiGLWQj-hLTHZBlUIS6jCn5sHvbXrY_Tmh75VPOjoqSVV4h5MaLTjawKeSkjykfmmTBUtKL8A_1OEOa8-dXZ3_MeTpVVM9CKMPlg88xfbFeojNCsYJ_WfXz9tovJ7RHKRx7lpD17kWjXV4d1x5hRCKtAkOX5EhVWFGqRQRzwUA2YXuMsDVfyvobF0exJwsmRZc7AtB9igHCB6UVKMlKfpC6MRT6topbzrcK-UOsBSnwSOpjOWLBydgmGEWSqY6WBEsb750kjbyfjiZ0TsG3p-eL3f-QCA91B-e_tv8r4PRh3XuAGDwKzIbgcMrUUxcD4LK48T4JWlS1eK-HYnztsxF6dm3kbmzcOkEoIXlems84XPaXkyWC2XEBJCoQ5fMVVIj84lWlKKCIXhFKTGEhF9--UKMgT0x3_4v5VspHL-Pdq1sDLGy10gDncnzJXvSf4_LnfksveafotE93oCfaFuQuZ4AY&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=rbuqnsh6wj63hb7rmgkfc&session_state=008c1b49-e3e3-6aef-4792-0495165e0792","statusCode":302,"duration":"2912ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 13:47:13.529","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:47:13.533","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:47:14.284","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:47:14.286","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.8961909,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 13:47:14.317","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:47:14.338","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:47:14.462","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:47:14.467","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:47:14.524","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":55,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:47:15.110","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:47:15.111","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:15.118","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:15.119","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:47:15.197","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:47:15.244","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:47:23.122","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:47:23.128","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:47:24.106","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:47:24.108","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.2349653,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 13:47:24.172","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:47:24.196","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:47:24.349","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:47:24.356","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:47:24.430","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":72,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:47:25.518","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:47:25.520","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:25.530","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:25.532","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:47:25.617","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:47:25.674","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:47:46.186","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:47:46.192","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:47:47.039","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:47:47.041","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.2983965,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 13:47:47.072","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:47:47.088","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:47:47.208","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:47:47.214","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:47:47.347","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":130,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:47:48.052","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:47:48.054","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:48.061","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:47:48.062","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:47:48.116","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:47:48.207","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:48:11.105","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 13:48:11.161","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 13:48:11.164","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"4bf8cc03-c341-471f-acfb-4b7dc80b26d6"}
{"timestamp":"2025-09-18 13:48:11.166","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 08:18:11 GMT] : [4bf8cc03-c341-471f-acfb-4b7dc80b26d6] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 13:48:11.177","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"4bf8cc03-c341-471f-acfb-4b7dc80b26d6","urlLength":623}
{"timestamp":"2025-09-18 13:48:11.180","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":623,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 13:48:11.192","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"86ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":44}
{"timestamp":"2025-09-18 13:48:14.897","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_H9AmfFSAtBsygaQ1MO0nKuocfZvOl-zWHE59dy7EpjDFxBE-X6XrSEab4EwKeYQyM8PEhJ_Viu_tjVa9j0Uq4T7MvR3bpCbv02OVl2kaLGZwkBFupxDQyCHc_BtQiDSiHR0Pjw99mEx8kA_6TIGG5h6x-BD24VLENJDhaTU93wLcaDMuCy9oMZd6Lf_yQAtXjfjn6_v5uCPHswr7VP2ic_UScT88f3IVf_OYmYKVa_tlMmxaiYLmRB7FXzwL03Y_kRbIbfWkfj10x7cEPjNSoHHb8IwUYeCJL4GVXhUdRlIzXtuIZN5yK5mLTIXm3HoVbdb6s8nEXZd8W4gyXNoE7YAmsX8Xp9chmi6EbIQK40AVRkrpOlsJLvZGcg_x5VuqzzlWGzYYEIXN9yAE4GdN1yHR1TiY3fOuD8U8dbH6OXYSyynebfhfGgGsI0hNojsh6It-sKfVaiCX5lB5JSFPeQrzbOyfUcfKI1g5FWpFyD9CWkNIBtGFpcYVlVqhqJdIaiO5ZG9x_6tcoqhQLZijO7vBa0GsrjuTBGte8hYA6GNAGDtyBxXoSyFp8wH81PvDHeRYbcThjrc94xC4t1qV4U4XxsKJBONHhO6_KkwGC8iPGydzHUCMkiM6SpyMzrXNZGb88v0CZtyAXPDj-Qf6tJBJnmIeQL-HN3QA_eJWJLQDrraD3cjWlSP-NlcT7hNS1g2HVAcakk0-tF1tQ0SQM0Z7H1dAGwQO-RMDMVCp-x9HRh1jPXQr2ZX_muoAYSpHwL81oD9FDjfohIyZ7mnGPg488dXDBEdRDZZDld_xuOYTWbdFvJJHoSFotBvA5AmgkDb5-g5I8_NrLWdJ_BS0iE-gES_L3&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=us097uhoi3d5bf0r87fu7u&session_state=008c1b49-e3e3-6aef-4792-0495165e0792"}
{"timestamp":"2025-09-18 13:48:14.898","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 13:48:14.899","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 13:48:15.506","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":3631,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 13:48:17.300","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 13:48:17.303","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 13:48:17.339","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 13:48:17.341","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 13:48:17.358","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 13:48:17.370","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTgzNDk3LCJleHAiOjE3NTg3ODgyOTd9.SnZCFNbb6fuIsisP8MNy4BpcEEKe_-F-Ft-WTEjKzx8","updatedAt":"2025-09-18T08:18:17.360Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 13:48:17.378","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_H9AmfFSAtBsygaQ1MO0nKuocfZvOl-zWHE59dy7EpjDFxBE-X6XrSEab4EwKeYQyM8PEhJ_Viu_tjVa9j0Uq4T7MvR3bpCbv02OVl2kaLGZwkBFupxDQyCHc_BtQiDSiHR0Pjw99mEx8kA_6TIGG5h6x-BD24VLENJDhaTU93wLcaDMuCy9oMZd6Lf_yQAtXjfjn6_v5uCPHswr7VP2ic_UScT88f3IVf_OYmYKVa_tlMmxaiYLmRB7FXzwL03Y_kRbIbfWkfj10x7cEPjNSoHHb8IwUYeCJL4GVXhUdRlIzXtuIZN5yK5mLTIXm3HoVbdb6s8nEXZd8W4gyXNoE7YAmsX8Xp9chmi6EbIQK40AVRkrpOlsJLvZGcg_x5VuqzzlWGzYYEIXN9yAE4GdN1yHR1TiY3fOuD8U8dbH6OXYSyynebfhfGgGsI0hNojsh6It-sKfVaiCX5lB5JSFPeQrzbOyfUcfKI1g5FWpFyD9CWkNIBtGFpcYVlVqhqJdIaiO5ZG9x_6tcoqhQLZijO7vBa0GsrjuTBGte8hYA6GNAGDtyBxXoSyFp8wH81PvDHeRYbcThjrc94xC4t1qV4U4XxsKJBONHhO6_KkwGC8iPGydzHUCMkiM6SpyMzrXNZGb88v0CZtyAXPDj-Qf6tJBJnmIeQL-HN3QA_eJWJLQDrraD3cjWlSP-NlcT7hNS1g2HVAcakk0-tF1tQ0SQM0Z7H1dAGwQO-RMDMVCp-x9HRh1jPXQr2ZX_muoAYSpHwL81oD9FDjfohIyZ7mnGPg488dXDBEdRDZZDld_xuOYTWbdFvJJHoSFotBvA5AmgkDb5-g5I8_NrLWdJ_BS0iE-gES_L3&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=us097uhoi3d5bf0r87fu7u&session_state=008c1b49-e3e3-6aef-4792-0495165e0792","statusCode":302,"duration":"2482ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 13:50:15.186","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:50:23.921","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:50:23.927","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:50:25.158","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:50:25.162","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":3.165672,"memory":{"used":44,"total":69}}}
{"timestamp":"2025-09-18 13:50:25.227","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:50:25.245","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:50:25.412","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:50:25.440","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:50:25.677","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":214,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:50:30.439","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:50:30.440","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:50:30.469","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:50:30.488","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:50:30.560","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:50:30.677","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:51:34.884","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:51:34.887","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:51:35.672","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:51:35.675","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.03969,"memory":{"used":44,"total":68}}}
{"timestamp":"2025-09-18 13:51:35.731","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:51:35.758","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:51:35.915","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:51:35.922","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:51:36.013","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":89,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:51:36.802","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:51:36.803","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:51:36.815","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:51:36.818","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:51:36.871","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:51:36.924","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:02.065","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:52:02.070","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:52:03.328","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:52:03.333","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.6667712,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 13:52:03.389","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:52:03.416","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:52:03.562","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:52:03.571","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:52:03.656","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":83,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:52:04.395","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:395:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:52:04.396","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:04.407","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:04.412","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:52:04.479","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:04.550","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:18.029","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:52:18.035","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:52:19.109","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:52:19.112","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.2788081,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 13:52:19.150","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:52:19.170","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:52:19.292","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:52:19.301","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:52:19.392","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":90,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:52:21.419","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:52:21.420","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:21.434","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:21.437","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:52:21.564","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:21.667","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:24.831","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:52:24.837","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:52:26.069","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:52:26.074","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.6524186,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 13:52:26.130","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:52:26.158","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:52:26.289","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:52:26.297","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:52:26.387","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":88,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:52:27.169","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:52:27.171","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:27.178","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:27.180","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:52:27.245","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:27.290","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:42.982","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:46.383","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 13:52:46.386","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 13:52:46.901","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 13:52:46.903","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.3275117,"memory":{"used":44,"total":69}}}
{"timestamp":"2025-09-18 13:52:46.929","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 13:52:46.944","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 13:52:47.078","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 13:52:47.084","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 13:52:47.151","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":65,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 13:52:47.900","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 13:52:47.901","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:47.910","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 13:52:47.912","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 13:52:48.962","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 13:52:49.054","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:01:38.966","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:01:38.968","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:01:39.469","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:01:39.470","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.2017727,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 14:01:39.489","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:01:39.503","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:01:39.601","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:01:39.606","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:01:39.685","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":77,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:01:40.221","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:01:40.222","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:01:40.226","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:01:40.228","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:01:40.278","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:01:40.325","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:03:31.837","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 14:03:31.876","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 14:03:31.877","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"fe13bcc9-d0de-475b-bfc5-64c96f3a5a6d"}
{"timestamp":"2025-09-18 14:03:31.879","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 08:33:31 GMT] : [fe13bcc9-d0de-475b-bfc5-64c96f3a5a6d] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 14:03:31.883","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"fe13bcc9-d0de-475b-bfc5-64c96f3a5a6d","urlLength":623}
{"timestamp":"2025-09-18 14:03:31.884","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":623,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 14:03:31.894","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"57ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 14:03:34.921","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P8wCgRHF0-JGGBfXWfqOHELV33CFKjY0VEd21ImaqJkvy9D9p4Kfp4-r_d9svEjxDJXhkJnDpSEReJJFmfSOjEm6URfe1-5afkz9PfiiO10fOHkt3Ra2ZuIFx0rQxTS3XxrSOHbdGoPEYmgl9IsVdRhzdTNuFU6otHl-qrJ1C2T2BckIO1mORyf7X8uvZG5c2wuhSAbOJYEEBbPadEQfEnC0fdOw8IkDGL7QmqQ4RzyDhhI1lkKnXOoi5tys_sHF5w2QalUUwVvbz9bxTN4MatkbnPHG3IY88Joe9nL4MlusRICwYKypW2vuC1K-mNh-WoUFosKo2ws2F6z8mwaUueHKsFuOTUxTkPXP_JsifyuCrEi8Qb2do9h1IMZvdMNefzwZyZZoSPRP-YqOdzNC-rJ2FZm1Rsgx-45yxYNcBzWzZXMp8M6omIaMLMMiRaDcD2gVG3OBdN-G9VWubNYLHN36zf9q9NzOZAyJmSrUxAVrE53fyOHERN23r5Ljd43DUfeHgH63P5o6dtEGT8wYCVjcvpJlJu653x_2jqhgs3AX6Edp3Wfd_rZynCA7lMFYfZFeJYIkKpTVfJXwpzER89qYAkGlYHKPWN4pny165JLB7kbsk43kSRx93Kqp_YfXOHudD2hKuw-FBu2xCZg61cSh3UxbM-aHFXwoRhO0Q9APSRYxPKZBjcY2lfI-XR_GtA-xueu09PVlAvdOl3oNSPngZCFQXrgh_BVa3zlmjsQY4Qqu6PHR9gwa-xG6cVMkqeNo5r8foPh53KNCXoahNaWDIh49HtAO-jcUbf7fiF9SAyzX6Op-VZ27P3t4kDjTNZT6oNrVx0e9EzCoqDz72yfSNQMNg&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=2e9b4934m19lzajngztavk&session_state=008c1b49-e3e3-6aef-4792-0495165e0792"}
{"timestamp":"2025-09-18 14:03:34.923","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:03:34.924","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:03:35.654","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":4628,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 14:03:37.555","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 14:03:37.558","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 14:03:37.592","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 14:03:37.593","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 14:03:37.600","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 14:03:37.606","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTg0NDE3LCJleHAiOjE3NTg3ODkyMTd9.eQ_0s2X9qFhPtxekjy7IztLYQBd6KTgvyTiRW4NAZaA","updatedAt":"2025-09-18T08:33:37.601Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 14:03:37.611","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P8wCgRHF0-JGGBfXWfqOHELV33CFKjY0VEd21ImaqJkvy9D9p4Kfp4-r_d9svEjxDJXhkJnDpSEReJJFmfSOjEm6URfe1-5afkz9PfiiO10fOHkt3Ra2ZuIFx0rQxTS3XxrSOHbdGoPEYmgl9IsVdRhzdTNuFU6otHl-qrJ1C2T2BckIO1mORyf7X8uvZG5c2wuhSAbOJYEEBbPadEQfEnC0fdOw8IkDGL7QmqQ4RzyDhhI1lkKnXOoi5tys_sHF5w2QalUUwVvbz9bxTN4MatkbnPHG3IY88Joe9nL4MlusRICwYKypW2vuC1K-mNh-WoUFosKo2ws2F6z8mwaUueHKsFuOTUxTkPXP_JsifyuCrEi8Qb2do9h1IMZvdMNefzwZyZZoSPRP-YqOdzNC-rJ2FZm1Rsgx-45yxYNcBzWzZXMp8M6omIaMLMMiRaDcD2gVG3OBdN-G9VWubNYLHN36zf9q9NzOZAyJmSrUxAVrE53fyOHERN23r5Ljd43DUfeHgH63P5o6dtEGT8wYCVjcvpJlJu653x_2jqhgs3AX6Edp3Wfd_rZynCA7lMFYfZFeJYIkKpTVfJXwpzER89qYAkGlYHKPWN4pny165JLB7kbsk43kSRx93Kqp_YfXOHudD2hKuw-FBu2xCZg61cSh3UxbM-aHFXwoRhO0Q9APSRYxPKZBjcY2lfI-XR_GtA-xueu09PVlAvdOl3oNSPngZCFQXrgh_BVa3zlmjsQY4Qqu6PHR9gwa-xG6cVMkqeNo5r8foPh53KNCXoahNaWDIh49HtAO-jcUbf7fiF9SAyzX6Op-VZ27P3t4kDjTNZT6oNrVx0e9EzCoqDz72yfSNQMNg&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=2e9b4934m19lzajngztavk&session_state=008c1b49-e3e3-6aef-4792-0495165e0792","statusCode":302,"duration":"2689ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":46}
{"timestamp":"2025-09-18 14:03:49.071","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 14:03:49.097","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 14:03:49.098","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"b0609ab3-08e3-46fe-8f0b-61b4664e31da"}
{"timestamp":"2025-09-18 14:03:49.098","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 08:33:49 GMT] : [b0609ab3-08e3-46fe-8f0b-61b4664e31da] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 14:03:49.101","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"b0609ab3-08e3-46fe-8f0b-61b4664e31da","urlLength":621}
{"timestamp":"2025-09-18 14:03:49.102","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":621,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 14:03:49.104","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"33ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 14:03:56.749","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P-sTJetvkosOQoVsdhhEygjLSQbb1n2JokzfaSQrvkBTG_v-DOVecvd2Clc8_yl-sMecI1SUnXVhgpISUuarO08eLbmLW9o8zyXOtaiXsRmWCZYscaskqp3PRbXIZ-EUJrTcUhf8RKje4hZPnEMNZ9adVR9XZYRmmPUeoPQelYZRpdhU4EJfmcNoLzRswLHrv4CFdMBwnAPe8_IB1CnvjlW11zBE7nLf_NtKNW4kqMKmOC7QftmrK4666WG8RCXEr5UBUE5T70QtRa6iHefnlCpTWWJDWtHzS_lb9jY8eInvYGg-dM8SDiMDfyiimQGBSrTvSXiroB_JkoXVUZXPbTPxgdKkHlvRNgEvqqBuvsNvQRQzqYcPB47coDChSHL35uvCG12aWWDU2iihLF_pUWUkFwAL34np-sgvDVtkIZBE11pyjT0qjaJhJNTA5i9RerX4j2eelYX-pd9-rMh8BPfDz8aT7sENgCIW6x67cv6UcHSLlaDJC0LWJtb1P-Yl6z_0tbX4j7beq-LkhhFPUlYfLew49kZYQe_yByrCKi3g_h1AnZceO2-aelBymvmao7cwaM-Y2nWZ1HW7ARZhXu6Ap7GBqfUGq5zEr-vzZp61qLRVGS_VkqGo71K2TE6xLMCe1a5r4AiAvzr4asj3-7G1SBIy8dskQ5DLG_x-D4k730O6SPemjd7sPfMk4BeaWyi0tB1ytgrWSOYX7EcjU6Eqss5jQq-rilPtS0BaSzssozHFWA3KSL71n0kX_b8WYRscycK3HigDzcPUXUMwR9Vrj7t8a57pNZ0xXTyZZ_WDWX6q6EdioI2SEoJSH1lbjBs0H_FnUbe_FkdPHETkIZYy8EjpgM&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=xlafxb2k9jqjcbarljlji&session_state=008c1b49-e3e3-6aef-4792-0495165e0792"}
{"timestamp":"2025-09-18 14:03:56.750","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:03:56.751","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:03:57.750","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":3731,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 14:03:58.244","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 14:03:58.245","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 14:03:58.256","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 14:03:58.258","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 14:03:58.263","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 14:03:58.266","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTg0NDM4LCJleHAiOjE3NTg3ODkyMzh9.5GqYovme8MjplU6rL4lBhnrFRy-1Saj3vovd9iLt-uQ","updatedAt":"2025-09-18T08:33:58.263Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 14:03:58.268","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P-sTJetvkosOQoVsdhhEygjLSQbb1n2JokzfaSQrvkBTG_v-DOVecvd2Clc8_yl-sMecI1SUnXVhgpISUuarO08eLbmLW9o8zyXOtaiXsRmWCZYscaskqp3PRbXIZ-EUJrTcUhf8RKje4hZPnEMNZ9adVR9XZYRmmPUeoPQelYZRpdhU4EJfmcNoLzRswLHrv4CFdMBwnAPe8_IB1CnvjlW11zBE7nLf_NtKNW4kqMKmOC7QftmrK4666WG8RCXEr5UBUE5T70QtRa6iHefnlCpTWWJDWtHzS_lb9jY8eInvYGg-dM8SDiMDfyiimQGBSrTvSXiroB_JkoXVUZXPbTPxgdKkHlvRNgEvqqBuvsNvQRQzqYcPB47coDChSHL35uvCG12aWWDU2iihLF_pUWUkFwAL34np-sgvDVtkIZBE11pyjT0qjaJhJNTA5i9RerX4j2eelYX-pd9-rMh8BPfDz8aT7sENgCIW6x67cv6UcHSLlaDJC0LWJtb1P-Yl6z_0tbX4j7beq-LkhhFPUlYfLew49kZYQe_yByrCKi3g_h1AnZceO2-aelBymvmao7cwaM-Y2nWZ1HW7ARZhXu6Ap7GBqfUGq5zEr-vzZp61qLRVGS_VkqGo71K2TE6xLMCe1a5r4AiAvzr4asj3-7G1SBIy8dskQ5DLG_x-D4k730O6SPemjd7sPfMk4BeaWyi0tB1ytgrWSOYX7EcjU6Eqss5jQq-rilPtS0BaSzssozHFWA3KSL71n0kX_b8WYRscycK3HigDzcPUXUMwR9Vrj7t8a57pNZ0xXTyZZ_WDWX6q6EdioI2SEoJSH1lbjBs0H_FnUbe_FkdPHETkIZYy8EjpgM&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=xlafxb2k9jqjcbarljlji&session_state=008c1b49-e3e3-6aef-4792-0495165e0792","statusCode":302,"duration":"1521ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 14:04:22.113","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:05:43.866","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:05:43.870","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:05:44.446","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:05:44.447","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.4101031,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 14:05:44.473","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:05:44.490","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:05:44.578","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:05:44.584","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:05:44.654","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":68,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:05:45.204","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:05:45.206","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:05:45.214","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:05:45.216","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:05:45.266","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:05:45.320","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:08:56.381","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 14:08:56.448","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 14:08:56.454","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"5fffd7b5-cc43-486e-8df7-ea6c75a154f4"}
{"timestamp":"2025-09-18 14:08:56.455","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 08:38:56 GMT] : [5fffd7b5-cc43-486e-8df7-ea6c75a154f4] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 14:08:56.462","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"5fffd7b5-cc43-486e-8df7-ea6c75a154f4","urlLength":623}
{"timestamp":"2025-09-18 14:08:56.464","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":623,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 14:08:56.473","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"94ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":44}
{"timestamp":"2025-09-18 14:13:54.482","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P8Sr2Vw5m6Qox5D3gSsl9bYKfIwcpBY-ynzXSluo9optVdW3lSBFXH4thf47n8ZgeaRgXXRUTWwW98KyMgVXRpuKsrMM6iDl1rbNuGeXFHMEa01JytXPA0r-xTbVM-AFCO1vvojXiyHW3Y59bj4JJTTlDcRGfEK95c-hr7Gb749gaEnYrJRew3H34cpsLU3TL65qtYOGCPf3jltedavILQguaDtkaLzsFd05P7zNHIP3jZo0Hp-0D6K44ulLvzhuG-ByLu0dcJeVSCMxwEGkBSiYZEiHGcKGvitZFoBBk6NdwyfN2IhIRRkC7x4mxjW67TBuPd94fZxLLdWeyam8SHxklHJesDwCKq6LB1bWeSCUwH2T2xAToSnjoO1Ey44U404QFlPh78blZhh3IPwf2Ov_fswZ_4uUtp3eC0PZHoK-IiS_znS9e8uoffxYQHiLANCezU3yi4T2KhBu7g09tvUP4n4dzb84sk3YTtlthCIbclqeHMQaAMGCNRAEhDzqA3cZJtmSTPWZfeYdUc-ergXbZOYPOM0oP-Dnbw1KI7VSOrT3bNwl66wQRLQFNCB6Z4kO_BxiP83BeqmhQJTHSQeglYYhUe6ZVFp6oodk88yDKFZgg6aN3gJ-eoFX-GzC02waD-wir7kr5HPLfB6fo_grA8rFJ1y_updyoB4e6KrFdb89cbhVo5NTPEiNX8H9t2FV10WrDiM8Gy8io_akDkmi2zjGzgirarB8sl1pOnoGWLRehgUZ8L5C2j8M_ySCaiw7TTVCKy-_3ZhfQK7NUqHSBu1ws66TWOa2p_g5F66tORlw-UapJBOUghdtg8GEiKQ27-j5ZHT3ESh_edxWXsmSphXheVmug&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=jl5930gpecazn84ztn5i6i&session_state=008c1b49-4619-dbb9-16f6-a2259692f810"}
{"timestamp":"2025-09-18 14:13:54.487","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:13:54.490","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:13:55.606","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":4962,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 14:13:57.821","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 14:13:57.823","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 14:13:57.854","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 14:13:57.856","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 14:13:57.863","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 14:13:57.868","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTg1MDM3LCJleHAiOjE3NTg3ODk4Mzd9.8YyiVWqy2bhTBPMbS9O5OrA6TPePLgjjlcGACApJrFs","updatedAt":"2025-09-18T08:43:57.865Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 14:13:57.872","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P8Sr2Vw5m6Qox5D3gSsl9bYKfIwcpBY-ynzXSluo9optVdW3lSBFXH4thf47n8ZgeaRgXXRUTWwW98KyMgVXRpuKsrMM6iDl1rbNuGeXFHMEa01JytXPA0r-xTbVM-AFCO1vvojXiyHW3Y59bj4JJTTlDcRGfEK95c-hr7Gb749gaEnYrJRew3H34cpsLU3TL65qtYOGCPf3jltedavILQguaDtkaLzsFd05P7zNHIP3jZo0Hp-0D6K44ulLvzhuG-ByLu0dcJeVSCMxwEGkBSiYZEiHGcKGvitZFoBBk6NdwyfN2IhIRRkC7x4mxjW67TBuPd94fZxLLdWeyam8SHxklHJesDwCKq6LB1bWeSCUwH2T2xAToSnjoO1Ey44U404QFlPh78blZhh3IPwf2Ov_fswZ_4uUtp3eC0PZHoK-IiS_znS9e8uoffxYQHiLANCezU3yi4T2KhBu7g09tvUP4n4dzb84sk3YTtlthCIbclqeHMQaAMGCNRAEhDzqA3cZJtmSTPWZfeYdUc-ergXbZOYPOM0oP-Dnbw1KI7VSOrT3bNwl66wQRLQFNCB6Z4kO_BxiP83BeqmhQJTHSQeglYYhUe6ZVFp6oodk88yDKFZgg6aN3gJ-eoFX-GzC02waD-wir7kr5HPLfB6fo_grA8rFJ1y_updyoB4e6KrFdb89cbhVo5NTPEiNX8H9t2FV10WrDiM8Gy8io_akDkmi2zjGzgirarB8sl1pOnoGWLRehgUZ8L5C2j8M_ySCaiw7TTVCKy-_3ZhfQK7NUqHSBu1ws66TWOa2p_g5F66tORlw-UapJBOUghdtg8GEiKQ27-j5ZHT3ESh_edxWXsmSphXheVmug&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=jl5930gpecazn84ztn5i6i&session_state=008c1b49-4619-dbb9-16f6-a2259692f810","statusCode":302,"duration":"3391ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":45}
{"timestamp":"2025-09-18 14:18:06.445","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:18:06.447","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:18:07.401","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:18:07.404","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.9181364,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 14:18:07.442","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:18:07.459","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:18:07.598","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:18:07.604","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:18:07.721","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":114,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:18:08.575","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:18:08.576","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:18:08.582","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:18:08.584","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:18:08.674","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:18:08.766","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:18:18.286","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:18:18.288","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:18:18.907","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:18:18.909","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.3376791,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 14:18:18.936","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:18:18.950","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:18:19.052","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:18:19.056","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:18:19.135","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":77,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:18:20.112","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:18:20.114","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:18:20.121","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:18:20.123","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:18:20.236","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:18:20.284","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:31:15.351","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:31:15.354","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:31:16.052","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:31:16.054","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.4563584,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 14:31:16.073","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:31:16.085","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:31:16.166","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:31:16.172","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:31:16.223","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":49,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:31:16.805","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:31:16.806","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:31:16.810","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:31:16.811","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:31:16.844","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:31:16.882","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:31:50.582","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 14:31:50.607","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 14:31:50.608","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"e5ffd9e4-dcd4-49e5-be51-1ddb2d14d4f9"}
{"timestamp":"2025-09-18 14:31:50.610","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 09:01:50 GMT] : [e5ffd9e4-dcd4-49e5-be51-1ddb2d14d4f9] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 14:31:50.614","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"e5ffd9e4-dcd4-49e5-be51-1ddb2d14d4f9","urlLength":623}
{"timestamp":"2025-09-18 14:31:50.615","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":623,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 14:31:50.620","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"40ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":45}
{"timestamp":"2025-09-18 14:31:54.844","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P9BqyKA1mnTrpYb1amWJ5_eV34kh5X4DlXs_6iYPWpDEMhc3xN834QY7SNc4ie0w0yJWiTLWxVPeq2-8mPnMArgq9zyIS_wYpnD8jvqDuQr7K0Tvjd3PE2epqBx02nNxrjFFOjFmCD7ESLWBOnyoCgoZvMqaGtBAPO8mP3eCeCzflkS1yp01WGwgheOZK9myJnMVL7YxeRUpOccWQWHPOqjC9LB4OIDT8JbhRw__VftYqlhIaZDaKUTtIhgpQhVZR1f1q0kiYxIoy2zuiC_nqub10XLM4cvhADmesViTsieYC801-JYnxs3iIS8a1zOvxXTb4odg7c6AP0jhpzd2kQB0v6CNVeYiK2bX-0wy5tlUFQbwLowN3mkajdF1mc2nbpjYN7Q9AJwCpCoMGzRavhrwVfCjpDPv4w-LCgHG13RKIMV2prDEd-RTTTKAZn5eiguSyfpSTM8fzT7-1JFceTTuXXKVvyVCwDVa8xt1hU2zQym-Jg95DSbMBcdJpH62doVrqWnErcSBWkPs6nI5Vhvupi0wFxGxYUeghinyaeWFfx5ZU30YhdH87wMoYBqV0htTSY93QJi6SV-sH01cCusCieJkIHxeTkPq6s3eDKmqBfhL2ZRibajkJCY59bjjPTOrpC0ojhWHCAAaW6-Rg0ksGEEiJf5Ds_IyO1mIZmTuBSH9sdIKFg-h9BLN_x5CEAtJ_uDMzBlpOKfsrZ8_dRdm-l3Xy863uwXrRqQjsNtEIo43Auk8Tw2UVU-dsnG6CjzzdP5N-_A0bKv5hmJ0w4wQTikTx9zDf4UVLeYv7HxS9Vt-PI5ujLBDTaivnAwTKKPfaWgvmiRdtRqclDBGAckW6JHgpVnog&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=iuyjhcykw1v75nzjp4rle&session_state=008c1b49-4619-dbb9-16f6-a2259692f810"}
{"timestamp":"2025-09-18 14:31:54.846","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:31:54.846","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:31:56.116","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":3960,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 14:31:56.641","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 14:31:56.642","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 14:31:56.661","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 14:31:56.663","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 14:31:56.668","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 14:31:56.675","level":"ERROR","message":"MSAL authentication failed","securityEvent":{"user":"anonymous","severity":"high"},"error":{"name":"SequelizeValidationError","errors":[{"message":"User must have either an employee_id, email, or ms_graph_user_id","type":"Validation error","path":"eitherEmployeeOrEmail","value":null,"origin":"FUNCTION","instance":{"role":"employee","permissions":[],"is_active":true,"failed_login_attempts":0,"two_factor_enabled":false,"login_notifications":true,"session_timeout":480,"id":null,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNzU4MTg2MTE2LCJleHAiOjE3NTg3OTA5MTZ9.gJ67dxl9kWw8iepuksE1rlhAdwB2KxF5qS4_kIhkoCY","updatedAt":"2025-09-18T09:01:56.669Z"},"validatorKey":"eitherEmployeeOrEmail","validatorName":null,"validatorArgs":[],"original":{}}]}}
{"timestamp":"2025-09-18 14:31:56.678","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P9BqyKA1mnTrpYb1amWJ5_eV34kh5X4DlXs_6iYPWpDEMhc3xN834QY7SNc4ie0w0yJWiTLWxVPeq2-8mPnMArgq9zyIS_wYpnD8jvqDuQr7K0Tvjd3PE2epqBx02nNxrjFFOjFmCD7ESLWBOnyoCgoZvMqaGtBAPO8mP3eCeCzflkS1yp01WGwgheOZK9myJnMVL7YxeRUpOccWQWHPOqjC9LB4OIDT8JbhRw__VftYqlhIaZDaKUTtIhgpQhVZR1f1q0kiYxIoy2zuiC_nqub10XLM4cvhADmesViTsieYC801-JYnxs3iIS8a1zOvxXTb4odg7c6AP0jhpzd2kQB0v6CNVeYiK2bX-0wy5tlUFQbwLowN3mkajdF1mc2nbpjYN7Q9AJwCpCoMGzRavhrwVfCjpDPv4w-LCgHG13RKIMV2prDEd-RTTTKAZn5eiguSyfpSTM8fzT7-1JFceTTuXXKVvyVCwDVa8xt1hU2zQym-Jg95DSbMBcdJpH62doVrqWnErcSBWkPs6nI5Vhvupi0wFxGxYUeghinyaeWFfx5ZU30YhdH87wMoYBqV0htTSY93QJi6SV-sH01cCusCieJkIHxeTkPq6s3eDKmqBfhL2ZRibajkJCY59bjjPTOrpC0ojhWHCAAaW6-Rg0ksGEEiJf5Ds_IyO1mIZmTuBSH9sdIKFg-h9BLN_x5CEAtJ_uDMzBlpOKfsrZ8_dRdm-l3Xy863uwXrRqQjsNtEIo43Auk8Tw2UVU-dsnG6CjzzdP5N-_A0bKv5hmJ0w4wQTikTx9zDf4UVLeYv7HxS9Vt-PI5ujLBDTaivnAwTKKPfaWgvmiRdtRqclDBGAckW6JHgpVnog&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=iuyjhcykw1v75nzjp4rle&session_state=008c1b49-4619-dbb9-16f6-a2259692f810","statusCode":302,"duration":"1833ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:32:55.820","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:32:55.823","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:32:56.448","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:32:56.450","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.7326517,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 14:32:56.473","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:32:56.489","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:32:56.611","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:32:56.619","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:32:56.681","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":59,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:32:57.443","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:32:57.444","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:32:57.448","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:32:57.449","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:32:57.478","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:32:57.519","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:33:02.093","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:33:02.096","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:33:02.628","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:33:02.629","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.3446062,"memory":{"used":45,"total":69}}}
{"timestamp":"2025-09-18 14:33:02.653","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:33:02.672","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:33:02.775","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:33:02.780","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:33:02.861","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":78,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:33:03.529","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:33:03.530","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:33:03.536","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:33:03.538","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:33:03.583","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:33:03.623","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:33:28.923","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 14:33:28.954","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 14:33:28.956","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"bb84304a-4b6b-4006-8435-7e2d247696ef"}
{"timestamp":"2025-09-18 14:33:28.959","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 09:03:28 GMT] : [bb84304a-4b6b-4006-8435-7e2d247696ef] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 14:33:28.965","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"bb84304a-4b6b-4006-8435-7e2d247696ef","urlLength":622}
{"timestamp":"2025-09-18 14:33:28.968","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":622,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 14:33:28.976","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"54ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":45}
{"timestamp":"2025-09-18 14:33:31.275","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P9Qy0Sm95aD2rJSAlmj6y7CMkjjGqKRKwFgSpCXpUiJLLiysTuDe4WZQH7VvD2FHvdC6moTmQNo6RvoM5jsZDXtvRql3TrvjiK0MaG4EpskX5rPXgGiAjivbiE1LTCt9D6dVJp_EyYDRGesfxXoZO9n0UYoUWCihAG2UMingmx9n6I1uTbEAKnC9MkWdFP0RYcMgHNsx2nm8oP-Vt-gDpSMhNAoMoBvm8yn13YKa2GZkdTOKtLF5SHv9fvwoKSB-ej6Op7WrJWAvDsiRhHWQ04mx3laFeCBHUXrmULS2epuZZVD8nkEHg1SXQvkJLdW4WBcL8Y7LQ0ndrdYaziojNEWO7HVDAM6lu964UI6Vav-R7yTUB1zrPmF6WHdgx-_tElNYACf7datAyRdr9zRikqXLp3aG8hSn22sYTO-BO9taX-t3I2ZjANv7swRbPbTtl7DwFL3rOxo511bUDMznT8cTm7ezpbDQRrT_-e2QczwSKt-pOU2-t8GSLQsp6FPQjXJiPVnWliN1RtuFwTvVnY23qo5yOZ4Wrprs8iLqkznAUpsbpKIyESyongGuKX1FJDpJ536r6jYjuh6hUVfSg4jvrDNxR2llHcDop88npbNBkxInWL1hdsewh-GImRdhHliHlvkIBT46vvqk6gUNRKv1v-waVSCblLHHYQJvBu_r-ZS4dhbD40BA8IEwGq7_mTJ_5P5dBxgJYoXU9ThG14WXkIew4ASUZVq1D8cGUQ1kQxpM0IWsltokCjrDyKMlbZJ7RFd4Tku4NEy9YVyz_eMUZ0ka9aovZRhnISTb5ish5BA-catGodmyeiL0PSSJ5tx87-ZRIZ95oQQKpg176B7ZbvyHfOFD78&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=9ik7freuwbir60ijrsmx3h&session_state=008c1b49-4619-dbb9-16f6-a2259692f810"}
{"timestamp":"2025-09-18 14:33:31.278","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:33:31.278","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 14:33:31.862","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":4474,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 14:33:32.349","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 14:33:32.350","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 14:33:32.373","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 14:33:32.374","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 14:33:32.381","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 14:33:32.426","level":"INFO","message":"Redirecting to frontend after successful authentication","securityEvent":{"user":"anonymous","severity":"low"},"frontendUrl":"http://localhost:5173","redirectUrl":"http://localhost:5173/auth/redirect?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibXNHcmFwaFVzZXJJZCI6Ijg3ZTIzOWUxLWM4MWQtNDIwMi1hYmEyLTA5MjI0Y2RmNzM4ZiIsImVtYWlsIjoic2F3YW5Ad2VsbG5lc3NleHRyY...","tokenLength":336,"refreshTokenLength":137,"userInfo":{"id":1,"email":"sawan@wellnessextract.com","role":"admin","employeeId":1}}
{"timestamp":"2025-09-18 14:33:32.428","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P9Qy0Sm95aD2rJSAlmj6y7CMkjjGqKRKwFgSpCXpUiJLLiysTuDe4WZQH7VvD2FHvdC6moTmQNo6RvoM5jsZDXtvRql3TrvjiK0MaG4EpskX5rPXgGiAjivbiE1LTCt9D6dVJp_EyYDRGesfxXoZO9n0UYoUWCihAG2UMingmx9n6I1uTbEAKnC9MkWdFP0RYcMgHNsx2nm8oP-Vt-gDpSMhNAoMoBvm8yn13YKa2GZkdTOKtLF5SHv9fvwoKSB-ej6Op7WrJWAvDsiRhHWQ04mx3laFeCBHUXrmULS2epuZZVD8nkEHg1SXQvkJLdW4WBcL8Y7LQ0ndrdYaziojNEWO7HVDAM6lu964UI6Vav-R7yTUB1zrPmF6WHdgx-_tElNYACf7datAyRdr9zRikqXLp3aG8hSn22sYTO-BO9taX-t3I2ZjANv7swRbPbTtl7DwFL3rOxo511bUDMznT8cTm7ezpbDQRrT_-e2QczwSKt-pOU2-t8GSLQsp6FPQjXJiPVnWliN1RtuFwTvVnY23qo5yOZ4Wrprs8iLqkznAUpsbpKIyESyongGuKX1FJDpJ536r6jYjuh6hUVfSg4jvrDNxR2llHcDop88npbNBkxInWL1hdsewh-GImRdhHliHlvkIBT46vvqk6gUNRKv1v-waVSCblLHHYQJvBu_r-ZS4dhbD40BA8IEwGq7_mTJ_5P5dBxgJYoXU9ThG14WXkIew4ASUZVq1D8cGUQ1kQxpM0IWsltokCjrDyKMlbZJ7RFd4Tku4NEy9YVyz_eMUZ0ka9aovZRhnISTb5ish5BA-catGodmyeiL0PSSJ5tx87-ZRIZ95oQQKpg176B7ZbvyHfOFD78&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=9ik7freuwbir60ijrsmx3h&session_state=008c1b49-4619-dbb9-16f6-a2259692f810","statusCode":302,"duration":"1154ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:34:31.040","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:34:31.042","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:34:31.043","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"4ms"}
{"timestamp":"2025-09-18 14:34:31.046","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"7ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:34:31.048","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:34:31.049","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:34:31.050","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"3ms"}
{"timestamp":"2025-09-18 14:34:31.052","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"5ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":47}
{"timestamp":"2025-09-18 14:34:38.481","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:34:38.482","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:34:38.483","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"3ms"}
{"timestamp":"2025-09-18 14:34:38.487","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"8ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:34:38.489","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:34:38.490","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:34:38.491","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"1ms"}
{"timestamp":"2025-09-18 14:34:38.492","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"3ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:36:51.857","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:41:34.764","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 14:41:34.766","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 14:41:35.281","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 14:41:35.282","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.2042155,"memory":{"used":45,"total":68}}}
{"timestamp":"2025-09-18 14:41:35.302","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 14:41:35.317","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 14:41:35.397","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 14:41:35.401","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 14:41:35.482","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":80,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 14:41:36.087","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 14:41:36.088","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:41:36.096","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 14:41:36.097","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 14:41:36.148","level":"INFO","message":"✅ BioMetrics SQL Server Connected","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att"}
{"timestamp":"2025-09-18 14:41:36.192","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:41:50.276","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:41:50.277","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:41:50.278","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"3ms"}
{"timestamp":"2025-09-18 14:41:50.284","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"9ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:41:50.287","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:41:50.288","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:41:50.289","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"2ms"}
{"timestamp":"2025-09-18 14:41:50.291","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"4ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:41:56.257","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:41:56.259","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:41:56.260","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"3ms"}
{"timestamp":"2025-09-18 14:41:56.263","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"6ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":43}
{"timestamp":"2025-09-18 14:41:56.265","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:41:56.265","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:41:56.266","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"1ms"}
{"timestamp":"2025-09-18 14:41:56.267","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"2ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":43}
{"timestamp":"2025-09-18 14:42:27.076","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 14:42:27.101","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 14:42:27.148","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:42:27.149","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":200,"responseTime":"73ms"}
{"timestamp":"2025-09-18 14:42:27.150","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/test-connection","statusCode":200,"duration":"75ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":44}
{"timestamp":"2025-09-18 14:42:27.152","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 14:42:27.164","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/employees?limit=1"}
{"timestamp":"2025-09-18 14:42:27.170","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 14:42:27.171","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/summary?startDate=2025-09-18&endDate=2025-09-18"}
{"timestamp":"2025-09-18 14:42:27.178","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/recent?limit=10"}
{"timestamp":"2025-09-18 14:42:27.184","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/departments"}
{"timestamp":"2025-09-18 14:42:27.195","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/employees"}
{"timestamp":"2025-09-18 14:42:27.204","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/summary"}
{"timestamp":"2025-09-18 14:42:27.211","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/recent"}
{"timestamp":"2025-09-18 14:42:27.213","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/departments"}
{"timestamp":"2025-09-18 14:42:27.227","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:42:27.228","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":200,"responseTime":"76ms"}
{"timestamp":"2025-09-18 14:42:27.229","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/test-connection","statusCode":200,"duration":"78ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":47}
{"timestamp":"2025-09-18 14:42:27.302","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        Emp_ID as employeeId,\n        Emp_Code as employeeCode,\n        Emp_Name as f...","error":"Invalid column name 'Emp_Name'.","params":["status","offset","limit"]}
{"timestamp":"2025-09-18 14:42:27.342","level":"ERROR","message":"Error fetching biometric employees: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'First_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Last_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Position'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Phone'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Biometric_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":13}},"name":"RequestError","number":207,"lineNumber":13,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Created_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Updated_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.342","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/employees?limit=1","statusCode":500,"responseTime":"179ms"}
{"timestamp":"2025-09-18 14:42:27.346","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/employees?limit=1","statusCode":500,"duration":"181ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:42:27.361","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        e.Emp_ID as employeeId,\n        e.Emp_Code as employeeCode,\n        e.Emp_Nam...","error":"Invalid column name 'Emp_Name'.","params":["startDate","endDate"]}
{"timestamp":"2025-09-18 14:42:27.431","level":"ERROR","message":"Error fetching attendance summary: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Work_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Overtime_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":11}},"name":"RequestError","number":207,"lineNumber":11,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.432","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"responseTime":"260ms"}
{"timestamp":"2025-09-18 14:42:27.434","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"duration":"262ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:42:27.435","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/employees?limit=1"}
{"timestamp":"2025-09-18 14:42:27.448","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT TOP @limit\n        a.ID as attendanceId,\n        a.Emp_ID as employeeId,\n        e.Emp...","error":"Incorrect syntax near '@limit'.","params":["limit"]}
{"timestamp":"2025-09-18 14:42:27.449","level":"ERROR","message":"Error fetching recent attendance: Incorrect syntax near '@limit'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":102,"state":1,"class":15,"message":"Incorrect syntax near '@limit'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":102,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[],"stack":"RequestError: Incorrect syntax near '@limit'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.450","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"responseTime":"273ms"}
{"timestamp":"2025-09-18 14:42:27.452","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"duration":"274ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:27.454","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT DISTINCT Department as name, COUNT(*) as employeeCount\n      FROM employees \n      WHE...","error":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","params":[]}
{"timestamp":"2025-09-18 14:42:27.457","level":"ERROR","message":"Error fetching departments: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":145,"state":1,"class":15,"message":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":145,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":207,"lineNumber":2,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.458","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/departments","statusCode":500,"responseTime":"274ms"}
{"timestamp":"2025-09-18 14:42:27.460","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/departments","statusCode":500,"duration":"276ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:42:27.461","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/summary?startDate=2025-09-18&endDate=2025-09-18"}
{"timestamp":"2025-09-18 14:42:27.466","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/employees"}
{"timestamp":"2025-09-18 14:42:27.468","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/recent?limit=10"}
{"timestamp":"2025-09-18 14:42:27.474","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/departments"}
{"timestamp":"2025-09-18 14:42:27.480","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/summary"}
{"timestamp":"2025-09-18 14:42:27.493","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/recent"}
{"timestamp":"2025-09-18 14:42:27.501","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/departments"}
{"timestamp":"2025-09-18 14:42:27.543","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        Emp_ID as employeeId,\n        Emp_Code as employeeCode,\n        Emp_Name as f...","error":"Invalid column name 'Emp_Name'.","params":["status","offset","limit"]}
{"timestamp":"2025-09-18 14:42:27.555","level":"ERROR","message":"Error fetching biometric employees: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'First_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Last_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Position'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Phone'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Biometric_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":13}},"name":"RequestError","number":207,"lineNumber":13,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Created_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Updated_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.556","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/employees?limit=1","statusCode":500,"responseTime":"120ms"}
{"timestamp":"2025-09-18 14:42:27.558","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/employees?limit=1","statusCode":500,"duration":"122ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:27.564","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        e.Emp_ID as employeeId,\n        e.Emp_Code as employeeCode,\n        e.Emp_Nam...","error":"Invalid column name 'Emp_Name'.","params":["startDate","endDate"]}
{"timestamp":"2025-09-18 14:42:27.580","level":"ERROR","message":"Error fetching attendance summary: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Work_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Overtime_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":11}},"name":"RequestError","number":207,"lineNumber":11,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.582","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"responseTime":"120ms"}
{"timestamp":"2025-09-18 14:42:27.584","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"duration":"122ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:42:27.587","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT TOP @limit\n        a.ID as attendanceId,\n        a.Emp_ID as employeeId,\n        e.Emp...","error":"Incorrect syntax near '@limit'.","params":["limit"]}
{"timestamp":"2025-09-18 14:42:27.591","level":"ERROR","message":"Error fetching recent attendance: Incorrect syntax near '@limit'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":102,"state":1,"class":15,"message":"Incorrect syntax near '@limit'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":102,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[],"stack":"RequestError: Incorrect syntax near '@limit'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.592","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"responseTime":"124ms"}
{"timestamp":"2025-09-18 14:42:27.595","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"duration":"127ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:42:27.599","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT DISTINCT Department as name, COUNT(*) as employeeCount\n      FROM employees \n      WHE...","error":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","params":[]}
{"timestamp":"2025-09-18 14:42:27.605","level":"ERROR","message":"Error fetching departments: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":145,"state":1,"class":15,"message":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":145,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":207,"lineNumber":2,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:27.606","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/departments","statusCode":500,"responseTime":"132ms"}
{"timestamp":"2025-09-18 14:42:27.609","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/departments","statusCode":500,"duration":"135ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:31.755","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 14:42:31.763","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 14:42:31.816","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:42:31.817","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":200,"responseTime":"64ms"}
{"timestamp":"2025-09-18 14:42:31.819","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/test-connection","statusCode":200,"duration":"65ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:31.823","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/employees?limit=1"}
{"timestamp":"2025-09-18 14:42:31.828","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/summary?startDate=2025-09-18&endDate=2025-09-18"}
{"timestamp":"2025-09-18 14:42:31.831","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/recent?limit=10"}
{"timestamp":"2025-09-18 14:42:31.836","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/departments"}
{"timestamp":"2025-09-18 14:42:31.841","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/employees"}
{"timestamp":"2025-09-18 14:42:31.843","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/summary"}
{"timestamp":"2025-09-18 14:42:31.845","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/recent"}
{"timestamp":"2025-09-18 14:42:31.848","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/departments"}
{"timestamp":"2025-09-18 14:42:31.867","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        Emp_ID as employeeId,\n        Emp_Code as employeeCode,\n        Emp_Name as f...","error":"Invalid column name 'Emp_Name'.","params":["status","offset","limit"]}
{"timestamp":"2025-09-18 14:42:31.877","level":"ERROR","message":"Error fetching biometric employees: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'First_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Last_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Position'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Phone'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Biometric_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":13}},"name":"RequestError","number":207,"lineNumber":13,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Created_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Updated_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:31.878","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/employees?limit=1","statusCode":500,"responseTime":"55ms"}
{"timestamp":"2025-09-18 14:42:31.882","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/employees?limit=1","statusCode":500,"duration":"59ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:31.885","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT TOP @limit\n        a.ID as attendanceId,\n        a.Emp_ID as employeeId,\n        e.Emp...","error":"Incorrect syntax near '@limit'.","params":["limit"]}
{"timestamp":"2025-09-18 14:42:31.888","level":"ERROR","message":"Error fetching recent attendance: Incorrect syntax near '@limit'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":102,"state":1,"class":15,"message":"Incorrect syntax near '@limit'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":102,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[],"stack":"RequestError: Incorrect syntax near '@limit'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:31.889","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"responseTime":"58ms"}
{"timestamp":"2025-09-18 14:42:31.891","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"duration":"60ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:42:31.896","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        e.Emp_ID as employeeId,\n        e.Emp_Code as employeeCode,\n        e.Emp_Nam...","error":"Invalid column name 'Emp_Name'.","params":["startDate","endDate"]}
{"timestamp":"2025-09-18 14:42:31.908","level":"ERROR","message":"Error fetching attendance summary: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Work_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Overtime_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":11}},"name":"RequestError","number":207,"lineNumber":11,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:31.909","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"responseTime":"82ms"}
{"timestamp":"2025-09-18 14:42:31.912","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"duration":"85ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:42:31.916","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT DISTINCT Department as name, COUNT(*) as employeeCount\n      FROM employees \n      WHE...","error":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","params":[]}
{"timestamp":"2025-09-18 14:42:31.922","level":"ERROR","message":"Error fetching departments: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":145,"state":1,"class":15,"message":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":145,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":207,"lineNumber":2,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:42:31.925","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/departments","statusCode":500,"responseTime":"89ms"}
{"timestamp":"2025-09-18 14:42:31.928","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/departments","statusCode":500,"duration":"91ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:45:09.275","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:45:09.276","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:45:09.278","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"3ms"}
{"timestamp":"2025-09-18 14:45:09.281","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"5ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":47}
{"timestamp":"2025-09-18 14:45:09.283","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:45:09.283","level":"WARN","message":"Authentication failed: No valid authorization header","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"path":"/all"}
{"timestamp":"2025-09-18 14:45:09.284","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":401,"responseTime":"1ms"}
{"timestamp":"2025-09-18 14:45:09.285","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":401,"duration":"2ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":47}
{"timestamp":"2025-09-18 14:47:45.240","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:45.262","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:45.290","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"50ms"}
{"timestamp":"2025-09-18 14:47:45.296","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":200,"duration":"56ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:47:45.297","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:45.305","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:45.317","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"16ms"}
{"timestamp":"2025-09-18 14:47:45.323","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"24ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:47:51.731","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:51.740","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:51.752","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"19ms"}
{"timestamp":"2025-09-18 14:47:51.756","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"25ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:47:51.758","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:51.766","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:51.777","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"19ms"}
{"timestamp":"2025-09-18 14:47:51.783","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"22ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:47:59.715","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:59.723","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:59.735","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"21ms"}
{"timestamp":"2025-09-18 14:47:59.739","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"24ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:47:59.744","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:47:59.753","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:47:59.771","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"30ms"}
{"timestamp":"2025-09-18 14:47:59.773","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"32ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:48:07.797","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:07.803","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:07.809","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"12ms"}
{"timestamp":"2025-09-18 14:48:07.812","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"15ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":49}
{"timestamp":"2025-09-18 14:48:07.815","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:07.823","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:07.832","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"18ms"}
{"timestamp":"2025-09-18 14:48:07.837","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"23ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:48:18.741","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:18.767","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:18.779","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"38ms"}
{"timestamp":"2025-09-18 14:48:18.785","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"42ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":50}
{"timestamp":"2025-09-18 14:48:18.788","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:18.868","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:19.117","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"329ms"}
{"timestamp":"2025-09-18 14:48:19.121","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"333ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":51}
{"timestamp":"2025-09-18 14:48:39.978","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:39.989","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:39.996","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"18ms"}
{"timestamp":"2025-09-18 14:48:40.000","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"22ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:48:40.002","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:40.008","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:40.021","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"19ms"}
{"timestamp":"2025-09-18 14:48:40.024","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"23ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:48:48.352","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:48.358","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:48.364","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"12ms"}
{"timestamp":"2025-09-18 14:48:48.366","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"14ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:48:48.368","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:48:48.378","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:48:48.385","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"16ms"}
{"timestamp":"2025-09-18 14:48:48.391","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"22ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":53}
{"timestamp":"2025-09-18 14:49:51.326","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:49:51.342","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:49:51.351","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"24ms"}
{"timestamp":"2025-09-18 14:49:51.354","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"27ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":54}
{"timestamp":"2025-09-18 14:49:51.355","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:49:51.363","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:49:51.370","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"14ms"}
{"timestamp":"2025-09-18 14:49:51.372","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"17ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":54}
{"timestamp":"2025-09-18 14:50:25.838","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:50:25.874","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:50:25.891","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"54ms"}
{"timestamp":"2025-09-18 14:50:25.899","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"57ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":55}
{"timestamp":"2025-09-18 14:50:25.903","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:50:25.916","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:50:25.927","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"24ms"}
{"timestamp":"2025-09-18 14:50:25.929","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"28ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":55}
{"timestamp":"2025-09-18 14:50:41.910","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:50:41.926","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:50:41.937","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"27ms"}
{"timestamp":"2025-09-18 14:50:41.940","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"29ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":56}
{"timestamp":"2025-09-18 14:50:41.945","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:50:41.952","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:50:41.958","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"14ms"}
{"timestamp":"2025-09-18 14:50:41.963","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"20ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":57}
{"timestamp":"2025-09-18 14:53:46.108","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:53:46.126","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:53:46.144","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"36ms"}
{"timestamp":"2025-09-18 14:53:46.146","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"38ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":45}
{"timestamp":"2025-09-18 14:53:46.152","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:53:46.159","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:53:46.259","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"101ms"}
{"timestamp":"2025-09-18 14:53:46.264","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"110ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":45}
{"timestamp":"2025-09-18 14:54:19.787","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:54:19.800","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:54:19.812","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"24ms"}
{"timestamp":"2025-09-18 14:54:19.818","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"30ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:54:19.820","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:54:19.826","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:54:19.831","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"11ms"}
{"timestamp":"2025-09-18 14:54:19.833","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"12ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":46}
{"timestamp":"2025-09-18 14:55:10.682","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:55:10.703","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:55:10.719","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"40ms"}
{"timestamp":"2025-09-18 14:55:10.723","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"45ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":47}
{"timestamp":"2025-09-18 14:55:10.725","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 14:55:10.735","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 14:55:10.743","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"18ms"}
{"timestamp":"2025-09-18 14:55:10.750","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"23ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:55:42.108","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 14:55:42.122","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 14:55:42.171","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:55:42.171","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":200,"responseTime":"64ms"}
{"timestamp":"2025-09-18 14:55:42.172","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/test-connection","statusCode":200,"duration":"65ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":48}
{"timestamp":"2025-09-18 14:55:42.174","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 14:55:42.184","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/employees?limit=1"}
{"timestamp":"2025-09-18 14:55:42.191","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 14:55:42.193","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/summary?startDate=2025-09-18&endDate=2025-09-18"}
{"timestamp":"2025-09-18 14:55:42.203","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/employees"}
{"timestamp":"2025-09-18 14:55:42.205","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/summary"}
{"timestamp":"2025-09-18 14:55:42.214","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/recent?limit=10"}
{"timestamp":"2025-09-18 14:55:42.219","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/departments"}
{"timestamp":"2025-09-18 14:55:42.235","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/recent"}
{"timestamp":"2025-09-18 14:55:42.238","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/departments"}
{"timestamp":"2025-09-18 14:55:42.247","level":"INFO","message":"BioMetrics Connection Test Successful:","securityEvent":{"user":"anonymous","severity":"low"},"version":"Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64) \n\tOct  8 2022 05:58:25 \n\tCopyright (C) 2022 Microsoft Corporation\n\tExpress Edition (64-bit) on Windows 10 Pro 10.0 <X64> (Build 19045: )\n","database_name":"ONtime_Att"}
{"timestamp":"2025-09-18 14:55:42.248","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":200,"responseTime":"73ms"}
{"timestamp":"2025-09-18 14:55:42.252","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/test-connection","statusCode":200,"duration":"76ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":51}
{"timestamp":"2025-09-18 14:55:42.284","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        Emp_ID as employeeId,\n        Emp_Code as employeeCode,\n        Emp_Name as f...","error":"Invalid column name 'Emp_Name'.","params":["status","offset","limit"]}
{"timestamp":"2025-09-18 14:55:42.289","level":"ERROR","message":"Error fetching biometric employees: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'First_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Last_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Position'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Phone'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Biometric_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":13}},"name":"RequestError","number":207,"lineNumber":13,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Created_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Updated_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.293","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/employees?limit=1","statusCode":500,"responseTime":"107ms"}
{"timestamp":"2025-09-18 14:55:42.295","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/employees?limit=1","statusCode":500,"duration":"111ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:55:42.345","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/employees?limit=1"}
{"timestamp":"2025-09-18 14:55:42.355","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        e.Emp_ID as employeeId,\n        e.Emp_Code as employeeCode,\n        e.Emp_Nam...","error":"Invalid column name 'Emp_Name'.","params":["startDate","endDate"]}
{"timestamp":"2025-09-18 14:55:42.509","level":"ERROR","message":"Error fetching attendance summary: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Work_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Overtime_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":11}},"name":"RequestError","number":207,"lineNumber":11,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.526","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"responseTime":"316ms"}
{"timestamp":"2025-09-18 14:55:42.543","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"duration":"335ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":51}
{"timestamp":"2025-09-18 14:55:42.564","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/employees"}
{"timestamp":"2025-09-18 14:55:42.567","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/summary?startDate=2025-09-18&endDate=2025-09-18"}
{"timestamp":"2025-09-18 14:55:42.573","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT TOP @limit\n        a.ID as attendanceId,\n        a.Emp_ID as employeeId,\n        e.Emp...","error":"Incorrect syntax near '@limit'.","params":["limit"]}
{"timestamp":"2025-09-18 14:55:42.575","level":"ERROR","message":"Error fetching recent attendance: Incorrect syntax near '@limit'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":102,"state":1,"class":15,"message":"Incorrect syntax near '@limit'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":102,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[],"stack":"RequestError: Incorrect syntax near '@limit'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.575","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"responseTime":"363ms"}
{"timestamp":"2025-09-18 14:55:42.576","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"duration":"364ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":51}
{"timestamp":"2025-09-18 14:55:42.579","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT DISTINCT Department as name, COUNT(*) as employeeCount\n      FROM employees \n      WHE...","error":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","params":[]}
{"timestamp":"2025-09-18 14:55:42.581","level":"ERROR","message":"Error fetching departments: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":145,"state":1,"class":15,"message":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":145,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":207,"lineNumber":2,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.581","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/departments","statusCode":500,"responseTime":"362ms"}
{"timestamp":"2025-09-18 14:55:42.583","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/departments","statusCode":500,"duration":"363ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:55:42.584","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/summary"}
{"timestamp":"2025-09-18 14:55:42.589","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/attendance/recent?limit=10"}
{"timestamp":"2025-09-18 14:55:42.594","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"low"},"method":"GET","url":"/biometrics/departments"}
{"timestamp":"2025-09-18 14:55:42.600","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/attendance/recent"}
{"timestamp":"2025-09-18 14:55:42.603","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/departments"}
{"timestamp":"2025-09-18 14:55:42.608","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        Emp_ID as employeeId,\n        Emp_Code as employeeCode,\n        Emp_Name as f...","error":"Invalid column name 'Emp_Name'.","params":["status","offset","limit"]}
{"timestamp":"2025-09-18 14:55:42.617","level":"ERROR","message":"Error fetching biometric employees: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'First_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Last_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Position'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Status'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Phone'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Biometric_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":13}},"name":"RequestError","number":207,"lineNumber":13,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Created_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Updated_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.618","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/employees?limit=1","statusCode":500,"responseTime":"274ms"}
{"timestamp":"2025-09-18 14:55:42.630","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/employees?limit=1","statusCode":500,"duration":"276ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:55:42.666","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT \n        e.Emp_ID as employeeId,\n        e.Emp_Code as employeeCode,\n        e.Emp_Nam...","error":"Invalid column name 'Emp_Name'.","params":["startDate","endDate"]}
{"timestamp":"2025-09-18 14:55:42.675","level":"ERROR","message":"Error fetching attendance summary: Invalid column name 'Emp_Name'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":18}},"name":"RequestError","number":207,"lineNumber":18,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":14}},"name":"RequestError","number":207,"lineNumber":14,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":15}},"name":"RequestError","number":207,"lineNumber":15,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":17}},"name":"RequestError","number":207,"lineNumber":17,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":3}},"name":"RequestError","number":207,"lineNumber":3,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Code'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Emp_Name'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'ID'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":7}},"name":"RequestError","number":207,"lineNumber":7,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":8}},"name":"RequestError","number":207,"lineNumber":8,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Time'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":9}},"name":"RequestError","number":207,"lineNumber":9,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Work_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":10}},"name":"RequestError","number":207,"lineNumber":10,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Overtime_Hours'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":11}},"name":"RequestError","number":207,"lineNumber":11,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Punch_Date'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":12}},"name":"RequestError","number":207,"lineNumber":12,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: Invalid column name 'Emp_Name'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.678","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"responseTime":"110ms"}
{"timestamp":"2025-09-18 14:55:42.683","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/summary?startDate=2025-09-18&endDate=2025-09-18","statusCode":500,"duration":"115ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":53}
{"timestamp":"2025-09-18 14:55:42.685","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT TOP @limit\n        a.ID as attendanceId,\n        a.Emp_ID as employeeId,\n        e.Emp...","error":"Incorrect syntax near '@limit'.","params":["limit"]}
{"timestamp":"2025-09-18 14:55:42.686","level":"ERROR","message":"Error fetching recent attendance: Incorrect syntax near '@limit'.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":102,"state":1,"class":15,"message":"Incorrect syntax near '@limit'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":102,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[],"stack":"RequestError: Incorrect syntax near '@limit'.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.687","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"responseTime":"98ms"}
{"timestamp":"2025-09-18 14:55:42.689","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/attendance/recent?limit=10","statusCode":500,"duration":"100ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:55:42.691","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"\n      SELECT DISTINCT Department as name, COUNT(*) as employeeCount\n      FROM employees \n      WHE...","error":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","params":[]}
{"timestamp":"2025-09-18 14:55:42.698","level":"ERROR","message":"Error fetching departments: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","securityEvent":{"user":"anonymous","severity":"high"},"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":145,"state":1,"class":15,"message":"ORDER BY items must appear in the select list if SELECT DISTINCT is specified.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":145,"lineNumber":2,"state":1,"class":15,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","precedingErrors":[{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":4}},"name":"RequestError","number":207,"lineNumber":4,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":5}},"name":"RequestError","number":207,"lineNumber":5,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":2}},"name":"RequestError","number":207,"lineNumber":2,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""},{"code":"EREQUEST","originalError":{"info":{"name":"ERROR","handlerName":"onErrorMessage","number":207,"state":1,"class":16,"message":"Invalid column name 'Department'.","serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":"","lineNumber":6}},"name":"RequestError","number":207,"lineNumber":6,"state":1,"class":16,"serverName":"DESKTOP-M56UM1D\\ONTIME2022","procName":""}],"stack":"RequestError: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.\n    at handleError (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\request.js:384:15)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at RequestTokenHandler.onErrorMessage (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\handler.js:284:21)\n    at Readable.<anonymous> (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\token\\token-stream-parser.js:19:33)\n    at Readable.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushObjectMode (node:internal/streams/readable:538:3)\n    at Readable.push (node:internal/streams/readable:393:5)\n    at nextAsync (node:internal/streams/from:194:22)"}
{"timestamp":"2025-09-18 14:55:42.699","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/departments","statusCode":500,"responseTime":"105ms"}
{"timestamp":"2025-09-18 14:55:42.700","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/departments","statusCode":500,"duration":"107ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"},"memory":52}
{"timestamp":"2025-09-18 14:57:31.313","level":"WARN","message":{"ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","endpoint":"/api/v1/auth/logout"},"securityEvent":{"type":"Invalid JSON payload","user":"anonymous","severity":"medium"}}
{"timestamp":"2025-09-18 14:57:31.315","level":"WARN","message":"Client error occurred Invalid JSON payload","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36","severity":"medium"},"stack":"Error: Invalid JSON payload\n    at verify (file:///C:/Users/Wellness/Projects/ems/ems/backend/app.js:201:15)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\body-parser\\lib\\read.js:106:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","status":403,"method":"POST","url":"/api/v1/auth/logout","params":{},"query":{}}
{"timestamp":"2025-09-18 16:37:45.663","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 16:37:45.671","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 16:37:46.507","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 16:37:46.509","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.935634,"memory":{"used":46,"total":69}}}
{"timestamp":"2025-09-18 16:37:46.550","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 16:37:46.565","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 16:37:46.682","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 16:37:46.689","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 16:37:46.848","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":156,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 16:37:48.292","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 16:37:48.295","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 16:37:48.305","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 16:37:48.310","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 16:38:03.328","level":"ERROR","message":"❌ BioMetrics SQL Server Connection Error: Failed to connect to 172.16.1.171:1433 in 15000ms","securityEvent":{"user":"anonymous","severity":"high"},"code":"ETIMEOUT","originalError":{"code":"ETIMEOUT"},"name":"ConnectionError","stack":"ConnectionError: Failed to connect to 172.16.1.171:1433 in 15000ms\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\connection-pool.js:85:17\n    at Connection.onConnect (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:849:9)\n    at Object.onceWrapper (node:events:633:26)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at Connection.connectTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1222:10)\n    at Timeout._onTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1167:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)"}
{"timestamp":"2025-09-18 16:38:03.329","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"SELECT @@VERSION as version, DB_NAME() as database_name...","error":"Failed to connect to 172.16.1.171:1433 in 15000ms","params":[]}
{"timestamp":"2025-09-18 16:38:03.330","level":"ERROR","message":"BioMetrics Connection Test Failed:","securityEvent":{"user":"anonymous","severity":"high"}}
{"timestamp":"2025-09-18 16:40:13.715","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:17:28.186","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 17:17:28.188","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 17:17:28.673","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 17:17:28.674","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":1.2007924,"memory":{"used":46,"total":70}}}
{"timestamp":"2025-09-18 17:17:28.694","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 17:17:28.707","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 17:17:28.791","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 17:17:28.796","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 17:17:28.899","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":100,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 17:17:29.662","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 17:17:29.663","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:17:29.669","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:17:29.671","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 17:17:44.692","level":"ERROR","message":"❌ BioMetrics SQL Server Connection Error: Failed to connect to 172.16.1.171:1433 in 15000ms","securityEvent":{"user":"anonymous","severity":"high"},"code":"ETIMEOUT","originalError":{"code":"ETIMEOUT"},"name":"ConnectionError","stack":"ConnectionError: Failed to connect to 172.16.1.171:1433 in 15000ms\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\connection-pool.js:85:17\n    at Connection.onConnect (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:849:9)\n    at Object.onceWrapper (node:events:633:26)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at Connection.connectTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1222:10)\n    at Timeout._onTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1167:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)"}
{"timestamp":"2025-09-18 17:17:44.693","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"SELECT @@VERSION as version, DB_NAME() as database_name...","error":"Failed to connect to 172.16.1.171:1433 in 15000ms","params":[]}
{"timestamp":"2025-09-18 17:17:44.694","level":"ERROR","message":"BioMetrics Connection Test Failed:","securityEvent":{"user":"anonymous","severity":"high"}}
{"timestamp":"2025-09-18 17:18:42.067","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/login?identifier=WE_IN017"}
{"timestamp":"2025-09-18 17:18:42.130","level":"INFO","message":"Generating auth code URL","securityEvent":{"user":"anonymous","severity":"low"},"identifier":"WE_IN017","email":"sawan@wellnessextract.com","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"],"envRedirectUri":"http://localhost:5000/api/v1/auth/redirect","backendUrl":"http://localhost:5000"}
{"timestamp":"2025-09-18 17:18:42.132","level":"INFO","message":"Generating authorization code URL","securityEvent":{"user":"anonymous","severity":"low"},"scopes":["User.Read"],"redirectUri":"http://localhost:5000/api/v1/auth/redirect","loginHint":"present","prompt":"select_account","correlationId":"a2d20a66-62dd-4806-bba8-fcea5ec37e53"}
{"timestamp":"2025-09-18 17:18:42.134","level":"INFO","message":"[MSAL] [Thu, 18 Sep 2025 11:48:42 GMT] : [a2d20a66-62dd-4806-bba8-fcea5ec37e53] : @azure/msal-node@3.7.3 : Info - getAuthCodeUrl called","securityEvent":{"user":"anonymous","severity":"low"},"msalLogLevel":2,"source":"msal-node"}
{"timestamp":"2025-09-18 17:18:42.151","level":"INFO","message":"Authorization code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"correlationId":"a2d20a66-62dd-4806-bba8-fcea5ec37e53","urlLength":623}
{"timestamp":"2025-09-18 17:18:42.152","level":"INFO","message":"Auth code URL generated successfully","securityEvent":{"user":"anonymous","severity":"low"},"urlLength":623,"redirectUri":"http://localhost:5000/api/v1/auth/redirect","authCodeUrl":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/authorize?client_id=31a9fc3b-6f83-4182-ba3f-323aaf6beba5&scope=User.Read%20openid%20profile%20offline_access&redirect..."}
{"timestamp":"2025-09-18 17:18:42.165","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/login?identifier=WE_IN017","statusCode":302,"duration":"96ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 17:19:23.082","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/auth/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_pfvFw4C49eF_m2RriO3_oxQD-p6ipKLZaob3-BQEkR7q1cwiSfraV8im6iuJzdElE9CTCyS0twfHnaX9Q5zEqiz5AeoIlPnN7i7lzcyvA8q_DLnSR1Jh-zzOn2iJTzc0WEfbx0_HkDCgkgxeRI-wJGeCrWXOCrdpunCfdR7cV-EQfgXPeKN3R82F6EGwiAbBSjA39XK85Ucv8DhTcC1ZRC_Jl0IxOr_k6LmTzlcrkyUORZTtM9SeDLTIXtiQ9AkXcS0gQq_WuJekCrpvxbm-CnU_7yGKNv_WUPiQGpxmyF9BZv43JrDD3Uoa36W4Ka4kZIv9j6TUH8_lVX0orAbVxg8PfPeurhBpXgfjoBEMlYacliTTNHH9GMtieRhmGQW6yFlVswNIRshhXJuSWeKCGudqV-KYbkmNDRAN5NLzJltUp4ynYQvW-hZiHX4D5LQYN-x1gKhNQ8Bmb6K3JQvHodSyAWULwOjAL0n5bKvHlmVWHD0J-1Wr0u1Lz6gpw6Ru1F_P5zxuGaQoxwsH_ulyhsebtnBppsJD4wRb2iI1mS4wCqWm0hqGQilNmH6UK0mdbdbxrNGPjGs4ks338v5hI4cUfv-lia3xEshAU2Tqjb6i34u5S_yDCMZqu_CSgsIYqE38xDithJbkdcW9NUrd7bZw4DPvaQHkoMUnD1XIRdvhCqC0rsU0zBgSMz59K3LvOvCYy7rZutDfAQv-vrD_RpS7re_f8EtNHTqgF7AqU5t98JYaSDysrl3_ZbgwPc5F3ycYhoMiWcNMfs3ybROyndezovi_hj7anVT5Ei6f86zyBOO_nQE6lmi91sYZWxz-BY6wYTJuW9OmiK-Eza-bFOS7W5J2M564&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=6kejllhshs4shcxyxd1sne&session_state=008c1b49-c355-5353-78da-71487d82af98"}
{"timestamp":"2025-09-18 17:19:23.087","level":"INFO","message":"Attempting to acquire token by authorization code","securityEvent":{"user":"anonymous","severity":"low"},"code":"present","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 17:19:23.089","level":"INFO","message":"Exchanging authorization code for tokens manually","securityEvent":{"user":"anonymous","severity":"low"},"tokenEndpoint":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e/oauth2/v2.0/token","clientId":"31a9fc3b...","redirectUri":"http://localhost:5000/api/v1/auth/redirect","scopes":["User.Read"]}
{"timestamp":"2025-09-18 17:19:23.788","level":"INFO","message":"Token exchange successful","securityEvent":{"user":"anonymous","severity":"low"},"tokenType":"Bearer","expiresIn":4090,"scope":"email openid profile User.Read"}
{"timestamp":"2025-09-18 17:19:25.729","level":"INFO","message":"Graph API request successful","securityEvent":{"user":"anonymous","severity":"low"},"endpoint":"/me","method":"GET","status":200,"responseSize":637}
{"timestamp":"2025-09-18 17:19:25.730","level":"INFO","message":"Looking up user in database","securityEvent":{"user":"anonymous","severity":"low"},"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","queryConditions":{"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","is_active":true}}
{"timestamp":"2025-09-18 17:19:25.781","level":"INFO","message":"User lookup result","securityEvent":{"user":"anonymous","severity":"low"},"userFound":true,"userId":1,"userEmail":"sawan@wellnessextract.com","userRole":"admin","msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f"}
{"timestamp":"2025-09-18 17:19:25.783","level":"INFO","message":"Creating JWT payload","securityEvent":{"user":"anonymous","severity":"low"},"jwtPayload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1},"userData":{"id":1,"ms_graph_user_id":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee_id":1,"employee":1}}
{"timestamp":"2025-09-18 17:19:25.793","level":"INFO","message":"JWT tokens created successfully","securityEvent":{"user":"anonymous","severity":"low"},"jwtTokenLength":336,"refreshTokenLength":137,"payload":{"id":1,"msGraphUserId":"87e239e1-c81d-4202-aba2-09224cdf738f","email":"sawan@wellnessextract.com","role":"admin","employee":1}}
{"timestamp":"2025-09-18 17:19:25.880","level":"INFO","message":"Redirecting to frontend after successful authentication","securityEvent":{"user":"anonymous","severity":"low"},"frontendUrl":"http://localhost:5173","redirectUrl":"http://localhost:5173/auth/redirect?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibXNHcmFwaFVzZXJJZCI6Ijg3ZTIzOWUxLWM4MWQtNDIwMi1hYmEyLTA5MjI0Y2RmNzM4ZiIsImVtYWlsIjoic2F3YW5Ad2VsbG5lc3NleHRyY...","tokenLength":336,"refreshTokenLength":137,"userInfo":{"id":1,"email":"sawan@wellnessextract.com","role":"admin","employeeId":1}}
{"timestamp":"2025-09-18 17:19:25.947","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/redirect?code=1.AWEBgZc5Zpi2I0um3ZXAy26TTjv8qTGDb4JBuj8yOq9r66VhAQBhAQ.AgABBAIAAABVrSpeuWamRam2jAF1XRQEAwDs_wUA9P_pfvFw4C49eF_m2RriO3_oxQD-p6ipKLZaob3-BQEkR7q1cwiSfraV8im6iuJzdElE9CTCyS0twfHnaX9Q5zEqiz5AeoIlPnN7i7lzcyvA8q_DLnSR1Jh-zzOn2iJTzc0WEfbx0_HkDCgkgxeRI-wJGeCrWXOCrdpunCfdR7cV-EQfgXPeKN3R82F6EGwiAbBSjA39XK85Ucv8DhTcC1ZRC_Jl0IxOr_k6LmTzlcrkyUORZTtM9SeDLTIXtiQ9AkXcS0gQq_WuJekCrpvxbm-CnU_7yGKNv_WUPiQGpxmyF9BZv43JrDD3Uoa36W4Ka4kZIv9j6TUH8_lVX0orAbVxg8PfPeurhBpXgfjoBEMlYacliTTNHH9GMtieRhmGQW6yFlVswNIRshhXJuSWeKCGudqV-KYbkmNDRAN5NLzJltUp4ynYQvW-hZiHX4D5LQYN-x1gKhNQ8Bmb6K3JQvHodSyAWULwOjAL0n5bKvHlmVWHD0J-1Wr0u1Lz6gpw6Ru1F_P5zxuGaQoxwsH_ulyhsebtnBppsJD4wRb2iI1mS4wCqWm0hqGQilNmH6UK0mdbdbxrNGPjGs4ks338v5hI4cUfv-lia3xEshAU2Tqjb6i34u5S_yDCMZqu_CSgsIYqE38xDithJbkdcW9NUrd7bZw4DPvaQHkoMUnD1XIRdvhCqC0rsU0zBgSMz59K3LvOvCYy7rZutDfAQv-vrD_RpS7re_f8EtNHTqgF7AqU5t98JYaSDysrl3_ZbgwPc5F3ycYhoMiWcNMfs3ybROyndezovi_hj7anVT5Ei6f86zyBOO_nQE6lmi91sYZWxz-BY6wYTJuW9OmiK-Eza-bFOS7W5J2M564&client_info=eyJ1aWQiOiI4N2UyMzllMS1jODFkLTQyMDItYWJhMi0wOTIyNGNkZjczOGYiLCJ1dGlkIjoiNjYzOTk3ODEtYjY5OC00YjIzLWE2ZGQtOTVjMGNiNmU5MzRlIn0&state=6kejllhshs4shcxyxd1sne&session_state=008c1b49-c355-5353-78da-71487d82af98","statusCode":302,"duration":"2804ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:19:30.859","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 17:19:30.868","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 17:19:30.872","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 17:19:39.688","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:19:39.694","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:19:39.695","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:19:39.696","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"8ms"}
{"timestamp":"2025-09-18 17:19:39.701","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"13ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:19:39.703","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:19:39.711","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:19:39.712","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:19:39.712","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"10ms"}
{"timestamp":"2025-09-18 17:19:39.714","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"11ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":48}
{"timestamp":"2025-09-18 17:19:40.862","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/biometrics/test-connection"}
{"timestamp":"2025-09-18 17:19:40.867","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/test-connection"}
{"timestamp":"2025-09-18 17:19:40.886","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"SELECT @@VERSION as version, DB_NAME() as database_name...","error":"Maximum call stack size exceeded","params":[]}
{"timestamp":"2025-09-18 17:19:40.887","level":"ERROR","message":"BioMetrics Connection Test Failed:","securityEvent":{"user":"anonymous","severity":"high"}}
{"timestamp":"2025-09-18 17:19:40.887","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":500,"responseTime":"26ms"}
{"timestamp":"2025-09-18 17:19:45.876","level":"ERROR","message":"❌ BioMetrics SQL Server Connection Error: Failed to connect to 172.16.1.171:1433 in 15000ms","securityEvent":{"user":"anonymous","severity":"high"},"code":"ETIMEOUT","originalError":{"code":"ETIMEOUT"},"name":"ConnectionError","stack":"ConnectionError: Failed to connect to 172.16.1.171:1433 in 15000ms\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\connection-pool.js:85:17\n    at Connection.onConnect (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:849:9)\n    at Object.onceWrapper (node:events:633:26)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at Connection.connectTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1222:10)\n    at Timeout._onTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1167:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)"}
{"timestamp":"2025-09-18 17:19:45.878","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"SELECT @@VERSION as version, DB_NAME() as database_name...","error":"Failed to connect to 172.16.1.171:1433 in 15000ms","params":[]}
{"timestamp":"2025-09-18 17:19:45.879","level":"ERROR","message":"BioMetrics Connection Test Failed:","securityEvent":{"user":"anonymous","severity":"high"}}
{"timestamp":"2025-09-18 17:19:45.879","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/test-connection","statusCode":500,"responseTime":"15021ms"}
{"timestamp":"2025-09-18 17:19:54.565","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:19:54.588","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:19:54.612","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"47ms"}
{"timestamp":"2025-09-18 17:19:54.625","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":200,"duration":"61ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":50}
{"timestamp":"2025-09-18 17:19:54.628","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:19:54.636","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:19:54.644","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"16ms"}
{"timestamp":"2025-09-18 17:19:54.649","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"21ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":50}
{"timestamp":"2025-09-18 17:19:56.631","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:19:56.639","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:19:56.640","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:19:56.641","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"10ms"}
{"timestamp":"2025-09-18 17:19:56.643","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"12ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":51}
{"timestamp":"2025-09-18 17:19:56.647","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:19:56.656","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:19:56.657","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:19:56.658","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"13ms"}
{"timestamp":"2025-09-18 17:19:56.660","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"14ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":51}
{"timestamp":"2025-09-18 17:20:40.917","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"POST","url":"/chat/send"}
{"timestamp":"2025-09-18 17:20:40.941","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/send"}
{"timestamp":"2025-09-18 17:20:40.945","level":"WARN","message":"Request validation failed","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"medium"},"path":"/send","method":"POST","userId":1,"errorCount":1,"errors":[{"field":"sessionId","message":"Session ID must be a valid UUID","value":"session_1758196196623_ikvrt228d","location":"body"}]}
{"timestamp":"2025-09-18 17:20:40.947","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"POST","url":"/send","statusCode":422,"responseTime":"30ms"}
{"timestamp":"2025-09-18 17:20:40.952","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"POST","url":"/send","statusCode":422,"duration":"36ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":52}
{"timestamp":"2025-09-18 17:25:56.274","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:25:56.302","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:25:56.303","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:25:56.303","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"30ms"}
{"timestamp":"2025-09-18 17:25:56.304","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"31ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:27:07.935","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:27:07.953","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:27:07.956","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:27:07.958","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"23ms"}
{"timestamp":"2025-09-18 17:27:07.960","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"26ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:27:07.963","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:27:07.971","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:27:07.973","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:27:07.975","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"10ms"}
{"timestamp":"2025-09-18 17:27:07.977","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"14ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:27:17.292","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:27:17.297","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:27:17.298","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:27:17.299","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"8ms"}
{"timestamp":"2025-09-18 17:27:17.304","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"11ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":48}
{"timestamp":"2025-09-18 17:27:31.726","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 17:27:31.748","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 17:27:32.905","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 17:27:32.907","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.8571059,"memory":{"used":46,"total":69}}}
{"timestamp":"2025-09-18 17:27:32.944","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 17:27:32.960","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 17:27:33.091","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 17:27:33.096","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 17:27:33.203","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":102,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 17:27:34.174","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 17:27:34.175","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:27:34.183","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:27:34.184","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 17:27:37.479","level":"INFO","message":"Logger initialized","securityEvent":{"user":"anonymous","severity":"low"},"directory":"logs","environment":"development","transports":7,"customLevels":["error","warn","info","http","debug","trace"]}
{"timestamp":"2025-09-18 17:27:37.486","level":"INFO","message":"Configuration loaded successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":5000,"database":"ems_db","biometrics":"172.16.1.171","redis":"127.0.0.1","email":"configured"}
{"timestamp":"2025-09-18 17:27:38.380","level":"INFO","message":"MSAL Client initialized successfully","securityEvent":{"user":"anonymous","severity":"low"},"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","redirectUri":"http://localhost:5000/api/v1/auth/redirect","logLevel":3,"cacheLocation":"memory","timeout":30000}
{"timestamp":"2025-09-18 17:27:38.382","level":"INFO","message":"Enhanced MSAL client initialized","securityEvent":{"user":"anonymous","severity":"low"},"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"stats":{"accountsCount":0,"configuration":{"clientId":"31a9fc3b...","tenantId":"66399781-b698-4b23-a6dd-95c0cb6e934e","authority":"https://login.microsoftonline.com/66399781-b698-4b23-a6dd-95c0cb6e934e","scopes":["User.Read","User.ReadBasic.All"],"timeout":30000,"logLevel":3,"cacheLocation":"memory","piiLoggingEnabled":false},"uptime":2.0706093,"memory":{"used":46,"total":69}}}
{"timestamp":"2025-09-18 17:27:38.431","level":"INFO","message":"Microsoft Graph Service initialized with token management","securityEvent":{"user":"anonymous","severity":"low"},"tokenManagementEnabled":true,"cacheEnabled":true,"autoTokenRefresh":true}
{"timestamp":"2025-09-18 17:27:38.445","level":"INFO","message":"Auth Controller initialized","securityEvent":{"user":"anonymous","severity":"low"},"redirectUri":"http://localhost:5000/api/v1/auth/redirect","frontendUrl":"http://localhost:5173","backendUrl":"http://localhost:5000","envRedirectUri":"http://localhost:5000/api/v1/auth/redirect"}
{"timestamp":"2025-09-18 17:27:38.558","level":"INFO","message":"Environment validation passed","securityEvent":{"user":"anonymous","severity":"low"},"nodeEnv":"development","port":"5000"}
{"timestamp":"2025-09-18 17:27:38.562","level":"INFO","message":"EMS Backend application configured successfully","securityEvent":{"user":"anonymous","severity":"low"},"environment":"development","port":"5000","version":"v1"}
{"timestamp":"2025-09-18 17:27:38.638","level":"INFO","message":"✅ MySQL Database Connected successfully","securityEvent":{"user":"anonymous","severity":"low"},"responseTime":74,"host":"localhost","database":"ems_db"}
{"timestamp":"2025-09-18 17:27:39.447","level":"ERROR","message":"❌ Database sync error:","securityEvent":{"user":"anonymous","severity":"high"},"error":"Too many keys specified; max 64 keys allowed","stack":"Error\n    at Query.run (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async UserRoleMap.sync (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\model.js:984:11)\n    at async Sequelize._syncModelsWithCyclicReferences (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\sequelize\\lib\\sequelize.js:398:7)\n    at async syncDatabase (file:///C:/Users/Wellness/Projects/ems/ems/backend/database/connection.js:235:5)\n    at async startServer (file:///C:/Users/Wellness/Projects/ems/ems/backend/index.js:66:9)"}
{"timestamp":"2025-09-18 17:27:39.448","level":"INFO","message":"⚠️ Continuing without database sync due to schema conflicts","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:27:39.460","level":"INFO","message":"Redis connected successfully","securityEvent":{"user":"anonymous","severity":"low"}}
{"timestamp":"2025-09-18 17:27:39.462","level":"INFO","message":"BioMetrics Connection Config:","securityEvent":{"user":"anonymous","severity":"low"},"server":"172.16.1.171","database":"ONtime_Att","port":1433,"hasUser":true,"hasPassword":true}
{"timestamp":"2025-09-18 17:27:54.474","level":"ERROR","message":"❌ BioMetrics SQL Server Connection Error: Failed to connect to 172.16.1.171:1433 in 15000ms","securityEvent":{"user":"anonymous","severity":"high"},"code":"ETIMEOUT","originalError":{"code":"ETIMEOUT"},"name":"ConnectionError","stack":"ConnectionError: Failed to connect to 172.16.1.171:1433 in 15000ms\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\mssql\\lib\\tedious\\connection-pool.js:85:17\n    at Connection.onConnect (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:849:9)\n    at Object.onceWrapper (node:events:633:26)\n    at Connection.emit (node:events:518:28)\n    at Connection.emit (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:970:18)\n    at Connection.connectTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1222:10)\n    at Timeout._onTimeout (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\tedious\\lib\\connection.js:1167:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)"}
{"timestamp":"2025-09-18 17:27:54.475","level":"ERROR","message":"BioMetrics Query Error:","securityEvent":{"user":"anonymous","severity":"high"},"query":"SELECT @@VERSION as version, DB_NAME() as database_name...","error":"Failed to connect to 172.16.1.171:1433 in 15000ms","params":[]}
{"timestamp":"2025-09-18 17:27:54.476","level":"ERROR","message":"BioMetrics Connection Test Failed:","securityEvent":{"user":"anonymous","severity":"high"}}
{"timestamp":"2025-09-18 17:28:17.754","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:28:17.785","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:28:17.814","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"59ms"}
{"timestamp":"2025-09-18 17:28:17.820","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"67ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":44}
{"timestamp":"2025-09-18 17:28:17.823","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:28:17.830","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:28:17.837","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"14ms"}
{"timestamp":"2025-09-18 17:28:17.839","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"16ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 17:28:19.558","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:28:19.565","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:28:19.567","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:28:19.567","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"10ms"}
{"timestamp":"2025-09-18 17:28:19.572","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"13ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 17:28:19.575","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:28:19.583","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:28:19.584","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:28:19.585","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"10ms"}
{"timestamp":"2025-09-18 17:28:19.587","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"12ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":45}
{"timestamp":"2025-09-18 17:28:24.110","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"POST","url":"/chat/send"}
{"timestamp":"2025-09-18 17:28:24.117","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/send"}
{"timestamp":"2025-09-18 17:28:24.120","level":"WARN","message":"Request validation failed","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"medium"},"path":"/send","method":"POST","userId":1,"errorCount":1,"errors":[{"field":"sessionId","message":"Session ID must be a valid UUID","value":"session_1758196699551_6cyo1x3rl","location":"body"}]}
{"timestamp":"2025-09-18 17:28:24.122","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"POST","url":"/send","statusCode":422,"responseTime":"11ms"}
{"timestamp":"2025-09-18 17:28:24.124","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"POST","url":"/send","statusCode":422,"duration":"15ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":46}
{"timestamp":"2025-09-18 17:32:14.290","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:32:14.303","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:32:14.304","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:32:14.305","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"15ms"}
{"timestamp":"2025-09-18 17:32:14.306","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"16ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":46}
{"timestamp":"2025-09-18 17:32:14.308","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:32:14.314","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:32:14.315","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:32:14.315","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"7ms"}
{"timestamp":"2025-09-18 17:32:14.317","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"9ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":46}
{"timestamp":"2025-09-18 17:32:24.012","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:32:24.021","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:32:24.023","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:32:24.025","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"14ms"}
{"timestamp":"2025-09-18 17:32:24.032","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"22ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":46}
{"timestamp":"2025-09-18 17:32:24.034","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:32:24.048","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:32:24.049","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:32:24.050","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"15ms"}
{"timestamp":"2025-09-18 17:32:24.052","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"18ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:33:12.883","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:33:12.897","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:33:12.898","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:33:12.898","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"16ms"}
{"timestamp":"2025-09-18 17:33:12.900","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"17ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:33:12.902","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:33:12.908","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:33:12.909","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:33:12.909","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"8ms"}
{"timestamp":"2025-09-18 17:33:12.911","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"9ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":47}
{"timestamp":"2025-09-18 17:33:42.649","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:33:42.670","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:33:42.684","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"35ms"}
{"timestamp":"2025-09-18 17:33:42.688","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"39ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":48}
{"timestamp":"2025-09-18 17:33:42.690","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/employees/all"}
{"timestamp":"2025-09-18 17:33:42.697","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/all"}
{"timestamp":"2025-09-18 17:33:42.703","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/all","statusCode":200,"responseTime":"13ms"}
{"timestamp":"2025-09-18 17:33:42.705","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/all","statusCode":304,"duration":"15ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":49}
{"timestamp":"2025-09-18 17:33:44.944","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:33:44.951","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:33:44.952","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:33:44.952","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"9ms"}
{"timestamp":"2025-09-18 17:33:44.954","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"10ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":48}
{"timestamp":"2025-09-18 17:33:44.955","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:33:44.960","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:33:44.961","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:33:44.961","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"7ms"}
{"timestamp":"2025-09-18 17:33:44.963","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"9ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":49}
{"timestamp":"2025-09-18 17:34:23.450","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"POST","url":"/chat/send"}
{"timestamp":"2025-09-18 17:34:23.469","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/send"}
{"timestamp":"2025-09-18 17:34:23.471","level":"WARN","message":"Request validation failed","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"medium"},"path":"/send","method":"POST","userId":1,"errorCount":1,"errors":[{"field":"sessionId","message":"Session ID must be a valid UUID","value":"session_1758197024938_nig904b3q","location":"body"}]}
{"timestamp":"2025-09-18 17:34:23.472","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"POST","url":"/send","statusCode":422,"responseTime":"23ms"}
{"timestamp":"2025-09-18 17:34:23.475","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"POST","url":"/send","statusCode":422,"duration":"25ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":49}
{"timestamp":"2025-09-18 17:34:53.117","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:34:53.131","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:34:53.132","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:34:53.132","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"16ms"}
{"timestamp":"2025-09-18 17:34:53.134","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"17ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":50}
{"timestamp":"2025-09-18 17:34:53.136","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:34:53.140","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:34:53.140","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:34:53.141","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"6ms"}
{"timestamp":"2025-09-18 17:34:53.144","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"7ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":50}
{"timestamp":"2025-09-18 17:35:45.099","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:35:45.120","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:35:45.121","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:35:45.122","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"22ms"}
{"timestamp":"2025-09-18 17:35:45.123","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"23ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":51}
{"timestamp":"2025-09-18 17:35:45.124","level":"INFO","message":"API Request","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"low"},"method":"GET","url":"/chat/sessions"}
{"timestamp":"2025-09-18 17:35:45.131","level":"INFO","message":"Authentication successful","securityEvent":{"user":"anonymous","ip":"::1","severity":"low"},"userId":1,"role":"admin","path":"/sessions"}
{"timestamp":"2025-09-18 17:35:45.132","level":"ERROR","message":"Failed to retrieve user sessions","securityEvent":{"user":"anonymous","severity":"high"},"userId":1,"error":"sequelize is not defined"}
{"timestamp":"2025-09-18 17:35:45.132","level":"INFO","message":"API Response","securityEvent":{"user":"anonymous","severity":"low"},"method":"GET","url":"/sessions","statusCode":500,"responseTime":"8ms"}
{"timestamp":"2025-09-18 17:35:45.134","level":"INFO","message":"Performance: Request completed","securityEvent":{"user":"anonymous","severity":"low"},"operation":"Request completed","duration":{"method":"GET","url":"/sessions","statusCode":500,"duration":"9ms","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0"},"memory":50}
{"timestamp":"2025-09-18 17:36:48.119","level":"WARN","message":{"ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","endpoint":"/api/v1/auth/logout"},"securityEvent":{"type":"Invalid JSON payload","user":"anonymous","severity":"medium"}}
{"timestamp":"2025-09-18 17:36:48.125","level":"WARN","message":"Client error occurred Invalid JSON payload","securityEvent":{"user":"anonymous","ip":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36 Edg/140.0.0.0","severity":"medium"},"stack":"Error: Invalid JSON payload\n    at verify (file:///C:/Users/Wellness/Projects/ems/ems/backend/app.js:201:15)\n    at C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\body-parser\\lib\\read.js:106:9\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:238:16)\n    at done (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (C:\\Users\\Wellness\\Projects\\ems\\ems\\backend\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","status":403,"method":"POST","url":"/api/v1/auth/logout","params":{},"query":{}}
{"timestamp":"2025-09-18 17:37:28.773","level":"INFO","message":"Received SIGINT. Starting graceful shutdown...","securityEvent":{"user":"anonymous","severity":"low"}}
